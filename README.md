# springboot-wexin
å²ä¸Šæœ€å…¨æ¥å…¥å¾®ä¿¡JSSDKèœé¸Ÿæ•™ç¨‹
> è™½ç„¶æˆ‘å¾ˆèœé¸Ÿï¼Œä½†æˆ‘è¿˜æƒ³åˆ†äº«
> **æœ‰éœ€è¦csdnç§¯åˆ†ä¸‹è½½éœ€æ±‚çš„åŒå­¦**,è¯„è®ºå…³æ³¨å›å¤æˆ‘å’‹éƒ½å¯ä»¥ï¼Œ**å…è´¹ç»™å¤§å®¶ä¸‹è½½**âš½
> æˆ‘åšä¿¡çˆ±åˆ†äº«çš„äººè¿æ°”ä¸€å®šä¸å·®ï¼Œè¿›æ­¥å¾ˆå¿«ä¹ï¼Œåˆ†äº«æ›´å¿«ä¹ğŸ˜¬

### GitHub
å…ˆç»™çŒ´æ€¥çš„å®¢å®˜ä¸Šå¹²è´§ä»£ç ï¼Œ[æ¥å…¥å¾®ä¿¡JSSDK GitHubåœ°å€](https://github.com/javadog-net/springboot-wexin)

### å‰è¨€
äº‹æƒ…çš„èµ·å› æ˜¯å› ä¸ºç–«æƒ…ä¸¥é‡ï¼Œé¢†å¯¼è¦æ±‚åšä¸€ä¸ªä¸“é¢˜é¡µï¼Œèƒ½å¤Ÿå°½å¯èƒ½å¸®åŠ©æ‰€éœ€è¦çš„äººã€‚
äºæ˜¯ä¹æœ¬ç‹—ä¸åŒäº‹æŒ‘ç¯å¥‹æˆ˜ï¼ŒåŠ ç­åŠ ç‚¹èµ¶å·¥å‡ºæ¥ã€‚
éƒ¨ç½²ä¸Šçº¿å®Œæˆï¼Œç”¨å¾®ä¿¡å†…ç½®æµè§ˆå™¨åˆ†äº«åï¼Œç†æƒ³çŠ¶æ€åº”è¯¥æ˜¯è¿™æ ·çš„ï¼Œå¦‚ä¸‹å›¾â¬‡ï¸

![](https://img-blog.csdnimg.cn/20200223141656148.png)

ä½†æ˜¯ï¼Œç»“æœå´ä¸æ˜¯ç†æƒ³çš„è¿™æ ·ï¼Œé»˜é»˜åœ°ç•™ä¸‹äº†æ²¡æœ‰æŠ€æœ¯çš„æ³ªæ°´ï¼Œå¦‚ä¸‹å›¾â¬‡ï¸
![](https://img-blog.csdnimg.cn/20200223141735564.png)

ç«Ÿç„¶æ²¡æœ‰å…³é”®å­—å’Œå±•ç¤ºå›¾ç‰‡ï¼Œåœ¨æœ¬èœç‹—çš„ä¸æ‡ˆåŠªåŠ›ä¸‹ï¼Œç»ˆäºæ‰¿è®¤æŠ€æœ¯ä¸è¡Œï¼Œå»è¯·æ•™äº†å¤§ä½¬ï¼Œå¾—å‡ºå¦‚ä¸‹ç»“è®ºã€‚

- 1.å¾®ä¿¡å†…ç½®æµè§ˆå™¨åˆ†äº«è‹¥éœ€è¦è‡ªå®šä¹‰å±•ç¤ºæè¿°åŠå³ä¾§å°é¢å›¾ï¼Œå¿…é¡»æ¥å…¥**å¾®ä¿¡JSSDK**,å¹¶ä¸”ä¸€å®šéœ€è¦æœ‰é…åˆæœ¬ç«™çš„**å¾®ä¿¡å…¬ä¼—å·ï¼ˆappIdå’ŒappSecretï¼‰æ‰å¯è‡ªå®šä¹‰åˆ†äº«ï¼Œåˆ‡è®°å°ç¨‹åºï¼ˆappIdå’ŒappSecretï¼‰çš„ä¸å¯ä»¥**
- 2.éå¾®ä¿¡åˆ†äº«ï¼Œå¦‚QQæµè§ˆå™¨ï¼ŒUCæµè§ˆå™¨ç­‰å„å¤§å‚å•†ï¼Œä¼šæ ¹æ®è‡ªèº«å®šä¹‰è·å–HTMLé¡µé¢ä¸­çš„TDK(titleï¼Œdescriptionï¼Œkeyword)ï¼Œä¸¾ä¾‹UCæµè§ˆå™¨åˆ†äº«â¬‡ï¸
![](https://img-blog.csdnimg.cn/20200223142824730.png)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200223143025602.png)

æ‰€ä»¥ï¼Œå¯¹æ¥å¾®ä¿¡JSSDK,åŠ¿åœ¨å¿…è¡Œï¼
*******
### Tip
å²ä¸Šæœ€è¯¦ç»†çš„**æ¥å…¥å¾®ä¿¡JSSDKèœé¸Ÿæ•™ç¨‹**ï¼Œæœ¬æ–‡å…¨é¢çš„è®°å½•äº†æ¥å…¥å¾®ä¿¡JSSDKçš„æ­¥éª¤ï¼Œå…·ä½“çš„ä»£ç åŠé‡åˆ°çš„å‘ï¼Œå¹¶ä¸”å±•ç¤ºå‘å¸ƒæœ€ç»ˆæ•ˆæœ,å¹¶å°†ä»£ç å‘å¸ƒGitHubã€‚éšç¯‡å¹…è¾ƒé•¿ï¼Œä½†å²ä¸Šæœ€å…¨ã€‚å¤§ä½¬å‹¿å–·ï¼Œæ–°æ‰‹å…¥é—¨ï¼Œäº²æµ‹å¯ç”¨ï¼ï¼ï¼

#### æœ¬æ–‡è¯•ç”¨äººç¾¤
- éœ€è¦æ¥å…¥å¾®ä¿¡JSSDKå´**çœ‹ä¸æ‡‚æ–‡æ¡£**çš„åŒå­¦
- çœ‹æ‡‚æ–‡æ¡£ä½†æ˜¯**å®æ“ä¸çŸ¥å¦‚ä½•ä¸‹æ‰‹**çš„åŒå­¦
- ä¸‹äº†æ‰‹ä½†æ˜¯å‡ºé”™ä¸çŸ¥é“**å¦‚ä½•è°ƒè¯•ä¿®æ”¹**çš„åŒå­¦
- æˆåŠŸæ¥å…¥è¿‡ä½†æ˜¯æƒ³**é‡æ¸©å…·ä½“æµç¨‹**çš„åŒå­¦

#### æœ¬æ–‡ç›®æ ‡
- å®æˆ˜è¿›è¡ŒH5ç½‘ç«™**å¾®ä¿¡è‡ªå®šä¹‰åˆ†äº«**
- å®æˆ˜è¿›è¡ŒH5ç½‘ç«™**è°ƒå–ç›¸å†Œé€‰å–å›¾ç‰‡**

æ”¾æ¾å¿ƒæ€ï¼Œæ…¢æ…¢æ¥çœ‹

************
### æ­£æ–‡
#### å®˜æ–¹æ–‡æ¡£
ä»»ä½•å¹³å°æ¥å…¥ï¼Œå®˜æ–¹æ–‡æ¡£æ˜¯æ ‡æ†ï¼Œè™½æœ‰äº›å…³é”®ç‚¹ä¸€ç¬”å¸¦è¿‡ï¼Œæˆ‘ä»¬ä¹Ÿè¦é€šè¯»æœ‰ä¸ªå°è±¡ï¼Œç‚¹å‡»[å¾®ä¿¡å®˜æ–¹æ–‡æ¡£](https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/JS-SDK.html)æ‰“å¼€æ–‡æ¡£ï¼Œå¦‚ä¸‹â¬‡ï¸
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200223145741670.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzI1OTg2MDU5,size_16,color_FFFFFF,t_70)
##### æ€»è§ˆ
- **1.xæ˜¯æ¥å…¥å…³é”®æ­¥éª¤ï¼Œéœ€ä»”ç»†å“è¯»**ï¼Œä¸æ¥å…¥æœ‰å…³
- 2.x - 12.x å…·ä½“æ¥å£æ¥å…¥ï¼Œéœ€è¦å¯¹æ¥æ—¶å…·ä½“å‚è€ƒ
- 13.x éœ€è¦æ³¨æ„ä¸‹ï¼Œ**api_ticket å¾®ä¿¡ä¸´æ—¶ç¥¨æ®**ï¼Œä¸æ¥å…¥æœ‰å…³
- 16-22 å‡æ˜¯é™„å½•ï¼Œå¯æŸ¥é˜…é”™è¯¯åˆ—è¡¨å¯¹åº”å«ä¹‰ï¼ŒåŠæ¥å£èœå•åˆ—è¡¨ç­‰æè¿°
******
#### å®æ“æ­¥éª¤
ä½¿ç”¨IDEAå·¥å…·ï¼Œæ–°å»ºSpringBooté¡¹ç›®ï¼Œé¡¹ç›®åä¸ºspringboot-wexinï¼Œç›®å½•ç»“æ„å¦‚ä¸‹
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200223153820797.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzI1OTg2MDU5,size_16,color_FFFFFF,t_70)
**AjaxJson.java**  - è‡ªå®šä¹‰æ¥å£è¿”å›å‰å°æ•°æ®æ ¼å¼çš„å°è£…ç±»
```java
/**
 * Copyright &copy; 2005-2020 <a href="http://www.jhmis.com/">jhmis</a> All rights reserved.
 */
package net.javadog.springbootwexin.common;

import com.fasterxml.jackson.annotation.JsonIgnore;

import java.util.LinkedHashMap;
import java.util.List;


/**
 * $.ajaxåéœ€è¦æ¥å—çš„JSON
 *
 */
public class AjaxJson {

	private boolean success = true;// æ˜¯å¦æˆåŠŸ
	private String errorCode = "-1";//é”™è¯¯ä»£ç 
	private String msg = "æ“ä½œæˆåŠŸ";// æç¤ºä¿¡æ¯
    private Long count;             //è¿”å›è¡¨æ ¼è®°å½•æ•°é‡
    private List<?> data;           //è¿”å›è¡¨æ ¼æ•°æ®
	private LinkedHashMap<String, Object> body = new LinkedHashMap<String, Object>();//å°è£…jsonçš„map

	public static AjaxJson ok(){
		AjaxJson j = new AjaxJson();
		return j;
	}

	public static AjaxJson ok(String msg){
		AjaxJson j = new AjaxJson();
		j.setMsg(msg);
		return j;
	}

	public static AjaxJson ok(String msg, Object object){
		AjaxJson j = new AjaxJson();
		j.setMsg(msg);
		j.setResult(object);
		return j;
	}

	public static AjaxJson ok(Object object){
		AjaxJson j = new AjaxJson();
		j.setResult(object);
		return j;
	}

	public static AjaxJson fail(String errorMsg){
		AjaxJson j = new AjaxJson();
		j.setSuccess(false);
		j.setErrorCode("999");//é»˜è®¤é”™è¯¯ç 
		j.setMsg(errorMsg);
		return j;
	}

	public static AjaxJson fail(String errorCode,String errorMsg){
		AjaxJson j = new AjaxJson();
		j.setSuccess(false);
		j.setErrorCode(errorCode);
		j.setMsg(errorMsg);
		return j;
	}
	//è¿”å›ä¸åˆ†é¡µçš„layuiè¡¨æ•°æ®
    public static AjaxJson layuiTable(List<?> list){
        AjaxJson j = new AjaxJson();
        j.setSuccess(true);
        j.setCount(Long.valueOf(list.size()));
        j.setData(list);
        return j;
    }
	public LinkedHashMap<String, Object> getBody() {
		return body;
	}

	public void setBody(LinkedHashMap<String, Object> body) {
		this.body = body;
	}

	public void put(String key, Object value){//å‘jsonä¸­æ·»åŠ å±æ€§ï¼Œåœ¨jsä¸­è®¿é—®ï¼Œè¯·è°ƒç”¨data.map.key
		body.put(key, value);
	}
	
	public void remove(String key){
		body.remove(key);
	}

	/**
	 * ç›´æ¥è®¾ç½®resultå†…å®¹
	 * @param result
	 */
	public void setResult(Object result){
		body.put("result", result);
	}
	@JsonIgnore//è¿”å›å¯¹è±¡æ—¶å¿½ç•¥æ­¤å±æ€§
	public Object getResult(){
		return body.get("result");
	}

	public String getMsg() {
		return msg;
	}

	public void setMsg(String msg) {//å‘jsonä¸­æ·»åŠ å±æ€§ï¼Œåœ¨jsä¸­è®¿é—®ï¼Œè¯·è°ƒç”¨data.msg
		this.msg = msg;
	}


	public boolean isSuccess() {
		return success;
	}

	public void setSuccess(boolean success) {
		this.success = success;
	}
	

	public void setErrorCode(String errorCode) {
		this.errorCode = errorCode;
	}

	public String getErrorCode() {
		return errorCode;
	}

    public Long getCount() {
        return count;
    }

    public void setCount(Long count) {
        this.count = count;
    }

    public List<?> getData() {
        return data;
    }

    public void setData(List<?> data) {
        this.data = data;
    }
}
```
*****
**WxInitController.java**  - å¾®ä¿¡åˆå§‹åŒ–æ¥å…¥Controlleræ§åˆ¶å™¨
```java
package net.javadog.springbootwexin.controller;
import net.javadog.springbootwexin.common.AjaxJson;
import net.javadog.springbootwexin.service.WxService;
import net.javadog.springbootwexin.utils.WxUtil;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;
import java.util.Map;

/**
 * ä¸€ä¸ªä½ç«¯å°æ°”æ²¡æ¡£æ¬¡çš„ç¨‹åºç‹— JavaDog
 * blog.javadog.net
 *
 * @BelongsProject: springboot-wexin
 * @BelongsPackage: net.javadog.springbootwexin.controller
 * @Author: hdx
 * @CreateTime: 2020-02-14 14:52
 * @Description: å¾®ä¿¡åˆå§‹åŒ–æ¥å…¥Controlleræ§åˆ¶å™¨
 */
@RestController
@RequestMapping("/weixin")
public class WxInitController {
    protected Logger logger = LoggerFactory.getLogger(getClass());

    @Autowired
    private WxService wxService;

    /**
    *@Author: hdx
    *@CreateTime: 20:39 2020/2/14
    *@param:  shareUrl åˆ†äº«urlåœ°å€
    *@Description: åˆå§‹åŒ–å¾®ä¿¡JSSDK Configä¿¡æ¯
     1.å…ˆé€šè¿‡appIdå’ŒappSecretå‚æ•°è¯·æ±‚æŒ‡å®šå¾®ä¿¡åœ°å€ è·å–AccessToken
     2.åœ¨é€šè¿‡ç¬¬ä¸€æ­¥ä¸­çš„AccessTokenä½œä¸ºå‚æ•°è¯·æ±‚å¾®ä¿¡åœ°å€ è·å–jsapi_ticketä¸´æ—¶ç¥¨æ®(æ­¤å¤„ä¸è€ƒè™‘è°ƒç”¨é¢‘ç‡ï¼Œä½¿ç”¨è€…æ ¹æ®æƒ…å†µæ”¾å…¥ç¼“å­˜æˆ–å®šæ—¶ä»»åŠ¡)
     3.é€šè¿‡ç¬¬äºŒæ­¥çš„JssdkGetticketå’Œtimestamp,nonceStr,urlä½œä¸ºå‚æ•°è¯·æ±‚å¾®ä¿¡åœ°å€ï¼Œè·å–ç­¾åsignature
     4.å°†ç¬¬ä¸‰æ­¥è·å¾—çš„signatureå’Œjsapi_ticket,nonceStr,timestamp,urlè¿”å›ç»™å‰ç«¯ï¼Œä½œä¸ºConfigåˆå§‹åŒ–éªŒè¯çš„ä¿¡æ¯
    */
    @RequestMapping("/initWXJSSDKConfigInfo")
    public AjaxJson initWXJSConfig (@RequestParam(required = false) String url) throws Exception{
        logger.info("url=" + url);
        String json = "";
        try {
            Map map = wxService.initJSSDKConfig(url);
            json = WxUtil.mapToJson(map);
        }catch (Exception e){
            AjaxJson.fail(e.getMessage());
        }
        return AjaxJson.ok(json);
    }

}
```
*****
**WxService.java**  - åˆå§‹åŒ–JSSDKConfig 
```java
package net.javadog.springbootwexin.service;

import lombok.Getter;
import net.javadog.springbootwexin.utils.WxUtil;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Service;
import java.util.HashMap;
import java.util.Map;
import java.util.UUID;

/**
 * ä¸€ä¸ªä½ç«¯å°æ°”æ²¡æ¡£æ¬¡çš„ç¨‹åºç‹— JavaDog
 * blog.javadog.net
 *
 * @BelongsProject: springboot-wexin
 * @BelongsPackage: net.javadog.springbootwexin.service
 * @Author: hdx
 * @CreateTime: 2020-02-14 20:43
 * @Description: å¾®ä¿¡ç›¸å…³service
 */
@Service
public class WxService {
    @Getter
    private static String AppId;
    @Value("${wx.appId}")
    public void setAppId(String appId) {
        AppId = appId;
    }
    /**
    *@Author: hdx
    *@CreateTime: 20:46 2020/2/14
    *@param:  shareUrl åˆ†äº«çš„url
    *@Description: åˆå§‹åŒ–JSSDKConfig
    */
    public Map initJSSDKConfig(String url) throws Exception {
        //è·å–AccessToken
        String accessToken = WxUtil.getJSSDKAccessToken();
        //è·å–JssdkGetticket
        String jsapiTicket = WxUtil.getJssdkGetticket(accessToken);
        String timestamp = Long.toString(System.currentTimeMillis() / 1000);
        String nonceStr = UUID.randomUUID().toString();
        String signature = WxUtil.buildJSSDKSignature(jsapiTicket,timestamp,nonceStr,url);
        Map<String,String> map = new HashMap<String,String>();
        map.put("url", url);
        map.put("jsapi_ticket", jsapiTicket);
        map.put("nonceStr", nonceStr);
        map.put("timestamp", timestamp);
        map.put("signature", signature);
        map.put("appid", AppId);
        return map;
    }
}
```
*****
**WxUtil.java**  - å¾®ä¿¡å·¥å…·ç±»
```java
package net.javadog.springbootwexin.utils;

import com.google.gson.Gson;
import com.google.gson.reflect.TypeToken;
import lombok.Getter;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.http.ResponseEntity;
import org.springframework.stereotype.Component;
import org.springframework.web.client.RestTemplate;
import java.security.MessageDigest;
import java.util.Map;

/**
 * ä¸€ä¸ªä½ç«¯å°æ°”æ²¡æ¡£æ¬¡çš„ç¨‹åºç‹— JavaDog
 * blog.javadog.net
 *
 * @BelongsProject: springboot-wexin
 * @BelongsPackage: net.javadog.springbootwexin.utils
 * @Author: hdx
 * @CreateTime: 2020-02-14 21:19
 * @Description: å¾®ä¿¡å·¥å…·ç±»
 */
@Component
public class WxUtil {
    @Getter
    protected static String AppId;
    @Getter
    protected static String AppSecret;
    @Getter
    protected static String JssdkAccesstokenUrl;
    @Getter
    protected static String JssdkGetticketUrl;

    @Value("${wx.appId}")
    public void setAppId(String appId) {
        AppId = appId;
    }

    @Value("${wx.appSecret}")
    public void setAppSecret(String appSecret) {
        AppSecret = appSecret;
    }

    @Value("${wx.jssdk_accesstoken_url}")
    public void setJssdkAccesstokenUrl(String jssdkAccesstokenUrl) {
        JssdkAccesstokenUrl = jssdkAccesstokenUrl;
    }

    @Value("${wx.jssdk_getticket_url}")
    public void setJssdkGetticketUrl(String jssdkGetticketUrl) {
        JssdkGetticketUrl = jssdkGetticketUrl;
    }

    /**
    *@Author: hdx
    *@CreateTime: 21:31 2020/2/14
    *@param:  * @param null
    *@Description:
    
    */
    public static String getJSSDKAccessToken() {
        String token = null;
        String url = JssdkAccesstokenUrl.replaceAll("APPID",
                AppId).replaceAll("APPSECRET",
                AppSecret);
        String json = postRequestForWeiXinService(url);
        Map map = jsonToMap(json);
        if (map != null) {
            token = (String) map.get("access_token");
        }
        return token;
    }

    /**
    *@Author: hdx
    *@CreateTime: 21:40 2020/2/14
    *@param:  * @param null
    *@Description: æ ¹æ®accessTokenè·å–JssdkGetticket

    */
    public static String getJssdkGetticket(String accessToken) {
        String url = JssdkGetticketUrl.replaceAll("ACCESS_TOKEN", accessToken);
        String json = postRequestForWeiXinService(url);
        Map map = jsonToMap(json);
        String jsapi_ticket = null;
        if (map != null) {
            jsapi_ticket = (String) map.get("ticket");
        }
        return jsapi_ticket;
    }

    /**
    *@Author: hdx
    *@CreateTime: 21:41 2020/2/14
    *@param:ticket æ ¹æ®accessTokenç”Ÿæˆçš„JssdkGetticket
    *@param:timestamp æ”¯ä»˜ç­¾åæ—¶é—´æˆ³ï¼Œæ³¨æ„å¾®ä¿¡jssdkä¸­çš„æ‰€æœ‰ä½¿ç”¨timestampå­—æ®µå‡ä¸ºå°å†™ã€‚ä½†æœ€æ–°ç‰ˆçš„æ”¯ä»˜åå°ç”Ÿæˆç­¾åä½¿ç”¨çš„timeStampå­—æ®µåéœ€å¤§å†™å…¶ä¸­çš„Så­—ç¬¦
    *@param:nonceStr éšæœºå­—ç¬¦ä¸²
    *@param:url å½“å‰ç½‘é¡µçš„URL
    *@Description: æ„å»ºåˆ†äº«é“¾æ¥çš„ç­¾å

    */
    public static String buildJSSDKSignature(String ticket,String timestamp,String nonceStr ,String url) throws Exception {
        String orderedString = "jsapi_ticket=" + ticket
                + "&noncestr=" + nonceStr + "&timestamp=" + timestamp
                + "&url=" + url;

        return sha1(orderedString);
    }

    /**
     * sha1 åŠ å¯†JSSDKå¾®ä¿¡é…ç½®å‚æ•°è·å–ç­¾åã€‚
     *
     * @return
     */
    public static String sha1(String orderedString) throws Exception {
        String ciphertext = null;
        MessageDigest md = MessageDigest.getInstance("SHA-1");
        byte[] digest = md.digest(orderedString.getBytes());
        ciphertext = byteToStr(digest);
        return ciphertext.toLowerCase();
    }
    /**
     * å°†å­—èŠ‚æ•°ç»„è½¬æ¢ä¸ºåå…­è¿›åˆ¶å­—ç¬¦ä¸²
     *
     * @param byteArray
     * @return
     */
    private static String byteToStr(byte[] byteArray) {
        String strDigest = "";
        for (int i = 0; i < byteArray.length; i++) {
            strDigest += byteToHexStr(byteArray[i]);
        }
        return strDigest;
    }
    /**
     * å°†å­—èŠ‚è½¬æ¢ä¸ºåå…­è¿›åˆ¶å­—ç¬¦ä¸²
     *
     * @param mByte
     * @return
     */
    private static String byteToHexStr(byte mByte) {
        char[] Digit = { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F' };
        char[] tempArr = new char[2];
        tempArr[0] = Digit[(mByte >>> 4) & 0X0F];
        tempArr[1] = Digit[mByte & 0X0F];

        String s = new String(tempArr);
        return s;
    }
    /**
    *@Author: hdx
    *@CreateTime: 21:49 2020/2/14
    *@param:  map
    *@Description:  mapToJson

    */
    public static String mapToJson(Map map){
        Gson gson = new Gson();
        String json = gson.toJson(map);
        return json;
    }

    /**
    *@Author: hdx
    *@CreateTime: 21:37 2020/2/14
    *@param:  json
    *@Description: jsonToMap

    */
    private static Map jsonToMap(String json) {
        Gson gons = new Gson();
        Map map = gons.fromJson(json, new TypeToken<Map>(){}.getType());
        return map;
    }

    /**
    *@Author: hdx
    *@CreateTime: 21:36 2020/2/14
    *@param:  * @param null
    *@Description: è°ƒå–å¾®ä¿¡æ¥å£

    */
    private static String postRequestForWeiXinService(String getAccessTokenUrl) {
        RestTemplate restTemplate = new RestTemplate();
        ResponseEntity<String> postForEntity = restTemplate.postForEntity(getAccessTokenUrl, null, String.class);
        String json = postForEntity.getBody();
        return json;
    }

}
```
*****
**SpringbootWexinApplication.java**  - SpringBootå¯åŠ¨ç±»
```java
package net.javadog.springbootwexin;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class SpringbootWexinApplication {

    public static void main(String[] args) {
        SpringApplication.run(SpringbootWexinApplication.class, args);
    }

}
```
*****
**config/application.yml**  - åŸºç¡€é…ç½®æ–‡ä»¶
```yml
spring:
  profiles:
    #æ¿€æ´»é…ç½®æ–‡ä»¶
    active: prod
  #é…ç½®é™æ€èµ„æºè·¯å¾„
  resources:
    static-locations: classpath:/static/

#æ—¥å¿—ç›¸å…³
logging:
  #é…ç½®æ–‡ä»¶æ—¥å¿—è·¯å¾„
  config: classpath:logback-spring.xml

#å¾®ä¿¡ç›¸å…³é…ç½®
wx:
  #appId ï¼ˆåˆ°æ—¶å€™æ¢æˆè‡ªå·±å…¬ä¼—å·çš„ï¼‰
  appId: wx4ad618620f8c3528
  #appSecretï¼ˆåˆ°æ—¶å€™æ¢æˆè‡ªå·±å…¬ä¼—å·çš„ï¼‰
  appSecret: b772c7863b29e270aa86e40f9b9e6215
  #å‚è€ƒä»¥ä¸‹æ–‡æ¡£è·å–access_tokenï¼ˆæœ‰æ•ˆæœŸ7200ç§’ï¼Œå¼€å‘è€…å¿…é¡»åœ¨è‡ªå·±çš„æœåŠ¡å…¨å±€ç¼“å­˜access_tokenï¼‰
  jssdk_accesstoken_url: https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=APPID&secret=APPSECRET
  #ç”¨ç¬¬ä¸€æ­¥æ‹¿åˆ°çš„access_token é‡‡ç”¨http GETæ–¹å¼è¯·æ±‚è·å¾—jsapi_ticketï¼ˆæœ‰æ•ˆæœŸ7200ç§’ï¼Œå¼€å‘è€…å¿…é¡»åœ¨è‡ªå·±çš„æœåŠ¡å…¨å±€ç¼“å­˜jsapi_ticketï¼‰
  jssdk_getticket_url: https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=ACCESS_TOKEN&type=jsapi
```
**application-dev.yml**  -å¼€å‘é…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
```yml
# å¼€å‘ç¯å¢ƒé…ç½®
spring:
  profiles: dev

#ç«¯å£è®¾ç½®
server:
  port: 8000
```

**application-prod.yml**  -ç”Ÿäº§é…ç½®æ–‡ä»¶ï¼ˆå› JSæ¥å£å®‰å…¨åŸŸåé™åˆ¶ï¼Œåˆ™é‡‡å–æ­£å¼ç”Ÿäº§é…ç½®ï¼‰
```yml
# ç”Ÿäº§ç¯å¢ƒé…ç½®
spring:
  profiles: prod

#ç«¯å£è®¾ç½®
server:
  port: 8002
```

**application-test.yml**  -æµ‹è¯•é…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
```yml
# ç”Ÿäº§ç¯å¢ƒé…ç½®
spring:
  profiles: prod

#ç«¯å£è®¾ç½®
server:
  port: 8002
```
******
**demo.html **  - æµ‹è¯•h5é¡µé¢
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>æµ‹è¯•jssdk</title>
    <!--å¼•å…¥å¾®ä¿¡JSæ–‡ä»¶-->
    <script src="https://res.wx.qq.com/open/js/jweixin-1.2.0.js" type="text/javascript"></script>
    <!--å¼•å…¥jquery-->
    <script src="http://libs.baidu.com/jquery/2.1.1/jquery.min.js"></script>
<script>
    //è·å–å½“å‰é¡µé¢åœ°å€
    var url = (window.location.href).split('#')[0];
    //è°ƒå–åå°æ¥å£è·å–æƒé™éªŒè¯é…ç½®
    $.ajax({
        type : "get",
        /*ï¼ï¼ï¼åˆ‡è®°åˆ°æ—¶å€™æ”¹æˆè‡ªå·±çš„*/
        url : "http://wxjssdk.javadog.net/weixin/initWXJSSDKConfigInfo?url="+url,//æ›¿æ¢ç½‘å€ï¼Œxxxæ ¹æ®è‡ªå·±jssdkæ–‡ä»¶ä½ç½®ä¿®æ”¹
        success : function(data){
            console.log("è¿”å›å€¼ä¸º=" + data);
            var msg = "";
            if(data.success){
                msg = JSON.parse(data.msg);
            }
            //é€šè¿‡configæ¥å£æ³¨å…¥æƒé™éªŒè¯é…ç½®
            wx.config({
                debug: true, // å¼€å¯è°ƒè¯•æ¨¡å¼,è°ƒç”¨çš„æ‰€æœ‰apiçš„è¿”å›å€¼ä¼šåœ¨å®¢æˆ·ç«¯alertå‡ºæ¥ï¼Œè‹¥è¦æŸ¥çœ‹ä¼ å…¥çš„å‚æ•°ï¼Œå¯ä»¥åœ¨pcç«¯æ‰“å¼€ï¼Œå‚æ•°ä¿¡æ¯ä¼šé€šè¿‡logæ‰“å‡ºï¼Œä»…åœ¨pcç«¯æ—¶æ‰ä¼šæ‰“å°
                appId: msg.appid,
                timestamp: msg.timestamp,
                nonceStr: msg.nonceStr,
                signature: msg.signature,
                /*ï¼ï¼ï¼åˆ‡è®°åˆ°æ—¶å€™æŒ‰éœ€è‡ªå·±é€‰æ‹©ï¼Œå‚è€ƒæ–‡æ¡£å¡«å†™*/
                jsApiList: [
                    "onMenuShareAppMessage",//åˆ†äº«ç»™å¥½å‹
                    "chooseImage"
                ]
            });
        },
        error:function(data){
            alert(JSON.stringify(data));
        }
    });

    //é€šè¿‡readyæ¥å£å¤„ç†æˆåŠŸéªŒè¯
    wx.ready(function (){
        wx.checkJsApi({
            jsApiList: ['chooseImage','onMenuShareAppMessage'],
            success: function (res) {JSON.stringify(res)}
        });
        var shareData = {
            title: 'æ ‡é¢˜',
            desc: 'ç®€ä»‹',//è¿™é‡Œè¯·ç‰¹åˆ«æ³¨æ„æ˜¯è¦å»é™¤html
            link: url,
            imgUrl: 'http://b2b.haier.com/shop/userfiles/sys/1/files/201912/af656b3a-8c2c-424d-937b-a8035deb78f5.jpg'
        };
        wx.onMenuShareAppMessage(shareData);


    });
    //ä»ç›¸å†Œé€‰å–å›¾ç‰‡
    function wxchooseImage(){
        wx.chooseImage({
            count: 1, // é»˜è®¤9
            sizeType: ['original', 'compressed'], // å¯ä»¥æŒ‡å®šæ˜¯åŸå›¾è¿˜æ˜¯å‹ç¼©å›¾ï¼Œé»˜è®¤äºŒè€…éƒ½æœ‰
            sourceType: ['album', 'camera'], // å¯ä»¥æŒ‡å®šæ¥æºæ˜¯ç›¸å†Œè¿˜æ˜¯ç›¸æœºï¼Œé»˜è®¤äºŒè€…éƒ½æœ‰
            success: function (res) {
                var localIds = res.localIds; // è¿”å›é€‰å®šç…§ç‰‡çš„æœ¬åœ°IDåˆ—è¡¨ï¼ŒlocalIdå¯ä»¥ä½œä¸ºimgæ ‡ç­¾çš„srcå±æ€§æ˜¾ç¤ºå›¾ç‰‡
            }
        });
    }
</script>
</head>
<body>
<button onclick="wxchooseImage();">ç‚¹æˆ‘é€‰å–ç›¸å†Œ</button>
</body>
</html>
```
******
ğŸ”¥nginx é…ç½®ï¼Œæ­¤å¤„ä¸æ˜¯é¡¹ç›®ä¸­çš„ä»£ç ï¼ï¼ï¼
**nginx.config**  - nginxæœåŠ¡å™¨é…ç½®
```shell
 server
    {
	    listen   80;                           #ç›‘å¬ç«¯å£è®¾ä¸º 80ã€‚
	    server_name  wxjssdk.javadog.net;      #è¯·ç»‘å®šè‡ªå·±çš„å‰ç¼€åŸŸåã€‚
	    location / {
        proxy_set_header HOST $host;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_pass http://127.0.0.1:8002/;
      }
    }
```
**MP_verify_B0vMQLCguxRzP1Rc.txt**  - JSæ¥å£å®‰å…¨åŸŸåéªŒè¯æ–‡ä»¶ï¼ˆåˆ°æ—¶å€™æ›¿æ¢æˆè‡ªå·±å…¬ä¼—å·ä¸Šçš„ï¼‰ï¼Œå¿…é¡»åœ¨åŸŸåæ ¹è·¯å¾„ä¸‹å¯ä»¥è®¿é—®
```java
#ä¸€å®šæŠŠè‡ªå·±å…¬ä¼—å·ä¸Šçš„txtéªŒè¯æ–‡ä»¶æ”¾ä¸Š!!!
B0vMQLCguxRzP1Rc
```
******
##### æ­¥éª¤è¯¦è§£
æ‰“å¼€æ–‡æ¡£JSSDKä½¿ç”¨æ­¥éª¤æ®µè½ï¼Œå¦‚ä¸‹â¬‡ï¸
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200223151159594.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzI1OTg2MDU5,size_16,color_FFFFFF,t_70)
##### 1.ç»‘å®šåŸŸå
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200224091753515.png)
å…ˆç™»å½•[å¾®ä¿¡å…¬ä¼—å¹³å°](https://mp.weixin.qq.com)è¿›å…¥â€œå…¬ä¼—å·è®¾ç½®â€çš„â€œåŠŸèƒ½è®¾ç½®â€é‡Œå¡«å†™â€œJSæ¥å£å®‰å…¨åŸŸåâ€ã€‚å¦‚ä¸‹â¬‡ï¸
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200223151711529.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzI1OTg2MDU5,size_16,color_FFFFFF,t_70)
ç‚¹å‡»è®¾ç½®å¦‚ä¸‹â¬‡ï¸
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200223151951781.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzI1OTg2MDU5,size_16,color_FFFFFF,t_70)
###### å…³é”®ç‚¹
- 1.åªèƒ½æ˜¯ä¸‰ä¸ªåŸŸåæˆ–è·¯å¾„ï¼Œ**ä¸­æ–‡ï¼Œipï¼Œå¸¦ç«¯å£ç­‰è·¯å¾„å‡ä¸å¯**
- 2.åŸŸåå¿…é¡»æ˜¯ICPå¤‡æ¡ˆè¿‡çš„ï¼Œæœ‰äº›åŒå­¦**ä½¿ç”¨å†…ç½‘ç©¿é€èŠ±ç”Ÿå£³ä¹‹ç±»çš„æ— æ³•è®¾ç½®JSå®‰å…¨åŸŸå**
- 3.å¿…é¡»å°†txtæ–‡ä»¶æ”¾ç½®å®‰å…¨åŸŸåæ‰€å¯¹åº”çš„ç›®å½•ï¼Œå¦‚wxjssdk.javadog.net/xxx.txtã€‚å¯ç”±nginxé…ç½®ï¼Œåªè¦èƒ½è®¿é—®å³å¯ï¼Œ**å¦‚æœè®¿é—®ä¸åˆ°åˆ™æ— æ³•è®¾ç½®JSå®‰å…¨åŸŸå**

##### 2.å¼•å…¥JSæ–‡ä»¶
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200224091726780.png)
å®é™…å¼•ç”¨åœ¨æˆ‘ä»¬çš„é¡¹ç›®Demo.htmlé¡µé¢ä¸­ç¬¬9è¡Œï¼Œå¦‚
![](https://img-blog.csdnimg.cn/20200224091137161.png) 
##### 3.é€šè¿‡configæ¥å£æ³¨å…¥æƒé™éªŒè¯é…ç½®
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200224091822341.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzI1OTg2MDU5,size_16,color_FFFFFF,t_70)
###### å…³é”®ç‚¹
å¿…é¡»åœ¨**åå°å¼€æ”¾ä¸€ä¸ªå¯¹å¤–è·å–configæ¥å£æ³¨å…¥æƒé™çš„æ¥å£**
	å¯¹åº”æˆ‘ä»¬ä»£ç ä¸­**WxInitController.java ä¸­çš„initWXJSSDKConfigInfo()**æ–¹æ³•ï¼Œä¼šè¿”å›æ–‡æ¡£ä¸­æ‰€éœ€çš„å¿…å¡«é¡¹**appId,timestamp,nonceStr,signature**éªŒè¯å‚æ•°
	![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200224092342176.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzI1OTg2MDU5,size_16,color_FFFFFF,t_70)

###### å®ç°æ­¥éª¤
     1.å…ˆé€šè¿‡appIdå’ŒappSecretå‚æ•°è¯·æ±‚æŒ‡å®šå¾®ä¿¡åœ°å€ è·å–AccessToken
     2.åœ¨é€šè¿‡ç¬¬ä¸€æ­¥ä¸­çš„AccessTokenä½œä¸ºå‚æ•°è¯·æ±‚å¾®ä¿¡åœ°å€ è·å–jsapi_ticketä¸´æ—¶ç¥¨æ®(æ­¤å¤„ä¸è€ƒè™‘è°ƒç”¨é¢‘ç‡ï¼Œä½¿ç”¨è€…æ ¹æ®æƒ…å†µæ”¾å…¥ç¼“å­˜æˆ–å®šæ—¶ä»»åŠ¡)
     3.é€šè¿‡ç¬¬äºŒæ­¥çš„JssdkGetticketå’Œtimestamp,nonceStr,urlä½œä¸ºå‚æ•°è¯·æ±‚å¾®ä¿¡åœ°å€ï¼Œè·å–ç­¾åsignature
     4.å°†ç¬¬ä¸‰æ­¥è·å¾—çš„signatureå’Œjsapi_ticket,nonceStr,timestamp,urlè¿”å›ç»™å‰ç«¯ï¼Œä½œä¸ºConfigåˆå§‹åŒ–éªŒè¯çš„ä¿¡æ¯
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200224094803470.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzI1OTg2MDU5,size_16,color_FFFFFF,t_70)

- 1.å…ˆé€šè¿‡appIdå’ŒappSecretå‚æ•°è¯·æ±‚æŒ‡å®šå¾®ä¿¡åœ°å€ è·å–**AccessToken**
	å¯¹åº”æˆ‘ä»¬ä»£ç ä¸­WxUtil.javaç¬¬61è¡Œ**getJSSDKAccessToken()**æ–¹æ³•
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200224094129176.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzI1OTg2MDU5,size_16,color_FFFFFF,t_70)
é€šè¿‡**è‡ªå·±å…¬ä¼—å·çš„appIdå’ŒappSecret**è°ƒç”¨**å¾®ä¿¡æœåŠ¡å™¨access_tokenæ¥å£åœ°å€è·å–token**,åœ°å€å¦‚ä¸‹
https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=APPID&secret=APPSECRET
å°†å…¶ä¸­APPIDå’ŒAPPSECRET**æ›¿æ¢æˆè‡ªå·±å…¬ä¼—å·çš„appIdå’ŒappSecret**ï¼Œè°ƒå–åè¿”å›Jsonå­—ç¬¦ä¸²ç»“æœï¼Œè·å–access_token

- 2.é€šè¿‡ç¬¬ä¸€æ­¥ä¸­çš„AccessTokenä½œä¸ºå‚æ•°è¯·æ±‚å¾®ä¿¡åœ°å€ è·å–jsapi_ticketä¸´æ—¶ç¥¨æ®
 å¯¹åº”æˆ‘ä»¬ä»£ç ä¸­WxUtil.javaç¬¬81è¡Œ**getJssdkGetticket()**æ–¹æ³•
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200224095454973.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzI1OTg2MDU5,size_16,color_FFFFFF,t_70)
é€šè¿‡ä¸Šä¸€æ­¥è·å¾—çš„**access_token**è°ƒç”¨**å¾®ä¿¡æœåŠ¡å™¨jsapi_ticketæ¥å£åœ°å€è·å–jsapi_ticket**,åœ°å€å¦‚ä¸‹
https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=ACCESS_TOKEN&type=jsapi
å°†å…¶ä¸­ACCESS_TOKEN**æ›¿æ¢æˆä¸Šä¸€æ­¥è·å–çš„access_token**ï¼Œè°ƒå–åè¿”å›Jsonå­—ç¬¦ä¸²ç»“æœï¼Œè·å–jsapi_ticket

- 3.é€šè¿‡ç¬¬äºŒæ­¥çš„JssdkGetticketå’Œtimestamp,nonceStr,urlä½œä¸ºå‚æ•°è¯·æ±‚å¾®ä¿¡åœ°å€ï¼Œ**è·å–ç­¾åsignature**
å¯¹åº”æˆ‘ä»¬ä»£ç ä¸­WxUtil.javaç¬¬102è¡ŒbuildJSSDKSignature()æ–¹æ³•
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200224101244262.png)
é€šè¿‡ä¸Šä¸€æ­¥è·å¾—çš„**jsapi_ticket**ï¼ŒåŠ ä¸Štimestamp(æ”¯ä»˜ç­¾åæ—¶é—´æˆ³),nonceStr(éšæœºå­—ç¬¦ä¸²),url(å½“å‰ç½‘é¡µçš„URL),æŒ‰ç…§å­—æ®µåçš„ASCII ç ä»å°åˆ°å¤§æ’åºï¼ˆå­—å…¸åºï¼‰åé€šè¿‡sha1è¿›è¡Œç­¾åï¼Œç”Ÿæˆæœ€ç»ˆç­¾åæ•°æ®ã€‚
å¯¹åº”æˆ‘ä»¬ä»£ç ä¸­WxUtil.javaç¬¬115è¡Œsha1()æ–¹æ³•
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200224153849877.png)
- 4.å‰ç«¯æˆåŠŸæ¥åˆ°è¿”å›å€¼
	
å¯¹åº”æˆ‘ä»¬ä»£ç ä¸­demo.htmlç¬¬16è¡Œ$.ajaxæ–¹æ³•
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200224160028903.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzI1OTg2MDU5,size_16,color_FFFFFF,t_70)
æ¥å£è¿”å›å€¼ä¸º
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200224155638274.png)
JSON.parse(msg)è½¬åŒ–ä¸€ä¸‹JSONå¯¹è±¡ï¼Œå¯¹åº”æˆ‘ä»¬ä»£ç ä¸­çš„Demo.htmlä¸­24è¡Œï¼Œè½¬åŒ–åæ•°æ®åšwx.configæ¥å£æ³¨å…¥æƒé™éªŒè¯ï¼Œå¯¹åº”æˆ‘ä»¬ä»£ç demo.htmlç¬¬37è¡Œ
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200224155914945.png)

##### 4.é€šè¿‡readyæ¥å£å¤„ç†æˆåŠŸéªŒè¯
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200224205700482.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzI1OTg2MDU5,size_16,color_FFFFFF,t_70)
###### å…³é”®ç‚¹
**æ‰€ä»¥å¦‚æœéœ€è¦åœ¨é¡µé¢åŠ è½½æ—¶å°±è°ƒç”¨ç›¸å…³æ¥å£ï¼Œåˆ™é¡»æŠŠç›¸å…³æ¥å£æ”¾åœ¨readyå‡½æ•°ä¸­è°ƒç”¨æ¥ç¡®ä¿æ­£ç¡®æ‰§è¡Œ**
åœ¨æˆ‘ä»¬ä»£ç åœ¨demo.htmlç¬¬46è¡Œï¼Œè‡ªå®šä¹‰åˆ†äº«æ¥å£ï¼Œéœ€è¦åœ¨é¡µé¢åˆå§‹åŒ–åŠ è½½æ—¶å°±æ”¾å…¥readyæ‰å¯ç”Ÿæ•ˆ
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200224205909331.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzI1OTg2MDU5,size_16,color_FFFFFF,t_70)
**åä¹‹ä¸éœ€è¦åˆå§‹åŒ–åŠ è½½çš„å³å¯é€šè¿‡ç”¨æˆ·äº‹ä»¶è§¦å‘æ‰§è¡Œå³å¯**
åœ¨æˆ‘ä»¬ä»£ç åœ¨demo.htmlç¬¬63è¡Œï¼Œç”¨æˆ·ç‚¹å‡»æŒ‰é’®è§¦å‘-æ‹ç…§æˆ–ä»æ‰‹æœºç›¸å†Œä¸­é€‰å›¾æ¥å£
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200224211957299.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzI1OTg2MDU5,size_16,color_FFFFFF,t_70)
#### å‘å¸ƒ
æˆ‘é‡‡ç”¨çš„IDEAæ’ä»¶Alibaba Cloud Toolkitå·¥å…·ä¸€é”®éƒ¨ç½²æœ¬åœ°åº”ç”¨åˆ°ECSæœåŠ¡å™¨ï¼Œå¯ç™¾åº¦æˆ–ç­‰æˆ‘ä¸‹ç¯‡æ–‡ç« è¯¦è§£ä¸€ä¸‹è¿™ä¸ªæ’ä»¶çš„ç”¨æ³•ã€‚
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200224213138387.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzI1OTg2MDU5,size_16,color_FFFFFF,t_70)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200224213221413.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzI1OTg2MDU5,size_16,color_FFFFFF,t_70)
Target ECSï¼šç›®æ ‡æœåŠ¡å™¨ï¼Œæˆ‘ä¹°çš„æ˜¯é˜¿é‡Œçš„æœåŠ¡å™¨ï¼Œåˆ™ç›´æ¥å¯ä»¥æœç´¢åˆ°ã€‚
Target Directory: ç›®æ ‡ç›®å½•ï¼Œéœ€è¦æŠŠæ‰“æˆçš„jaråŒ…ä¸Šä¼ è‡³å“ªä¸ªè·¯å¾„ä¸‹ å¦‚ï¼š/usr/local/hdx/web/
Command: ä¸Šä¼ åæ‰§è¡Œçš„æ“ä½œå‘½ä»¤  å¦‚ï¼šnohup java -jar /usr/local/hdx/web/springboot-wexin.jar

å‘å¸ƒæˆåŠŸåä¼šåœ¨ç»ˆç«¯å‡ºç°æˆåŠŸæç¤ºä¿¡æ¯
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200224213613751.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzI1OTg2MDU5,size_16,color_FFFFFF,t_70)
ç„¶åå¤§åŠŸå‘Šæˆï¼Œè®¿é—®ä¸€ä¸‹è¯•è¯• [http://wxjssdk.javadog.net/demo.html](http://wxjssdk.javadog.net/demo.html)
å¦‚æœè°ƒè¯•æ¨èä½¿ç”¨**å¾®ä¿¡å¼€å‘è€…å·¥å…·**ï¼Œä¹Ÿå°±æ˜¯
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200224214236995.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzI1OTg2MDU5,size_16,color_FFFFFF,t_70)
åˆ‡è®°**é…ç½®nginx**å’Œ**æœåŠ¡å™¨å®‰å…¨ç«¯å£è®¿é—®æƒé™**ï¼ï¼ï¼å¦åˆ™ä¼š404å“¦ï¼ï¼ï¼


#### æµ‹è¯•
- 1.å…ˆæ¥æµ‹è¯•ä¸‹æ‹ç…§æˆ–ä»æ‰‹æœºç›¸å†Œä¸­é€‰å›¾æ¥å£
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200224215022360.gif)
è°ƒè¯•æ­£å¸¸

- 2.å†æ¥æµ‹è¯•å¾®ä¿¡å†…ç½®åˆ†äº«
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200224215535267.gif)
è°ƒè¯•æŠ¥é”™ï¼Œè¿™æ˜¯ä¸ªå°å‘ã€‚æœ¬ç‹—åœ¨è¿™è°ƒè¯•äº†å¥½ä¹…ï¼ŒåŸå› å‡ºåœ¨ä¸ªäººçš„**è®¢é˜…å·æ˜¯æ²¡æœ‰è‡ªå®šä¹‰åˆ†äº«æƒé™**çš„ï¼ï¼
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200224215906222.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzI1OTg2MDU5,size_16,color_FFFFFF,t_70)

#### å°å‘æ€»ç»“
1. è®¢é˜…å·å’ŒæœåŠ¡å·æ‰€æ¶‰åŠæƒé™ä¸åŒï¼Œéœ€è¯¦ç»†æŸ¥çœ‹å¾®ä¿¡å¼€å‘æ–‡æ¡£ï¼ŒæŸ¥è¯¢å…¬ä¼—å·æƒé™
2. IPç™½åå•æœªè®¾ç½®,ä¼šæŠ¥40164
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200224220440497.png)
IPç™½åå•éœ€è¦åœ¨å…¬ä¼—å·**å®‰å…¨ä¸­å¿ƒè®¾ç½®**
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200224220551848.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzI1OTg2MDU5,size_16,color_FFFFFF,t_70)
3. invalid signature ç­¾åå¼‚å¸¸
å»ºè®®ä½¿ç”¨å¾®ä¿¡JSSDK[ç­¾åéªŒè¯å·¥å…·](https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=jsapisign)éªŒè¯æ˜¯å¦æœ‰è¯¯


æˆ‘æ˜¯JavaDogï¼Œè°¢è°¢åšå‹è€å¿ƒçœ‹å®Œäº†ï¼Œ**ç‚¹ä¸ªèµğŸ‘**å†èµ°å‘—ï¼Œä¸è¡Œæ‰¹è¯„ç‚¹è¯„ä¸¤å¥ä¹Ÿè¡Œå•Šï¼ï¼ï¼

![](https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xOTM1NTczNS1mZTkzZWY5NDIyMjg1Yzg5?x-oss-process=image/format,png)
![](https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xOTM1NTczNS01MWVlYzhiNmRkMzRjZmM3?x-oss-process=image/format,png)
    

